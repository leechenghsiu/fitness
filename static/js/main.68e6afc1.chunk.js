(this.webpackJsonpfitness=this.webpackJsonpfitness||[]).push([[0],{157:function(t,e,a){t.exports={wrapper:"styles_wrapper__3uYX0"}},168:function(t,e,a){t.exports={actionBarWrapper:"styles_actionBarWrapper__1ag_G"}},170:function(t,e,a){t.exports={wrapper:"styles_wrapper__SGlJu"}},171:function(t,e,a){t.exports={wrapper:"styles_wrapper__2jYNF"}},174:function(t,e,a){t.exports={homeLayout:"styles_homeLayout__DpZir"}},19:function(t,e,a){t.exports={wrapper:"styles_wrapper__35WVN",topContent:"styles_topContent__3FkVc",topContentRow:"styles_topContentRow__73EPa",topContentBox:"styles_topContentBox__I0hjr",avatar:"styles_avatar__3JJSg",dayCount:"styles_dayCount__32FNO",bottomContent:"styles_bottomContent__wmqZF",bottomContentRow:"styles_bottomContentRow__fbNrf",sticky:"styles_sticky__1yWUa",isScroll:"styles_isScroll__247Zp",bottomContentBox:"styles_bottomContentBox__7gEig",content:"styles_content__2qWgG",bar:"styles_bar__10AVy",statusText:"styles_statusText__HbpIf"}},240:function(t,e,a){},241:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a(47),s=a.n(c),r=a(79),i=a(86);a(242),a(193),a(243);i.a.initializeApp({apiKey:"AIzaSyAb9MzWbfXwdEU29vCbbHOT4xy0QEuF0qM",authDomain:"fitness-33eed.firebaseapp.com",projectId:"fitness-33eed",storageBucket:"fitness-33eed.appspot.com",messagingSenderId:"921814966866",appId:"1:921814966866:web:6ff8266a57219707be758b",measurementId:"G-Z3EH7SP7ZX"}),i.a.analytics();var o=i.a.firestore(),l=o.collection("user"),u=o.collection("diet"),d=(o.collection("train"),i.a),j=a(15),b=a(131),p=a(22),h=a(156),f=Object(h.a)(),O=a(157),x=a.n(O),m=a(3),v=function(t){var e=t.children;return Object(m.jsx)(n.Suspense,{fallback:Object(m.jsx)("div",{children:"Loading..."}),children:Object(m.jsx)("div",{className:x.a.wrapper,children:e})})},_="/",g=a(182),y=function(t){var e=t.user,a=t.component,n=Object(g.a)(t,["user","component"]);return Object(m.jsx)(p.a,Object(j.a)({component:function(t){return Object(m.jsx)(a,Object(j.a)(Object(j.a)({},t),{},{user:e}))}},n))},w=a(16),k=a(177),N=a(113),C=a(172),A=a(21),D=a.n(A),S=a(52),R=a(38),T=a(8),Y=a.n(T),W=a(35),E=a.n(W),I=a(180),L=a(249),M=a(183),B=a(68),z=a(250),F=a(246),V=a(179),P=a(252),U=a(69),G=a.n(U),H=function(t){var e=t.visible,a=t.tags,c=t.setTags,s=t.isWeight,r=void 0!==s&&s,i=Object(n.useRef)(),o=Object(n.useState)(!1),l=Object(w.a)(o,2),u=l[0],d=l[1],b=function(){var t=a.inputValue,e=a.list;t&&-1===e.indexOf(t)&&(e=[].concat(Object(B.a)(e),[t])),c(Object(j.a)(Object(j.a)({},a),{},{list:e,inputValue:""})),d(!1)};return Object(n.useEffect)((function(){u&&i.current.focus()}),[u]),Object(m.jsxs)("div",{className:Y()(G.a.selectedContent,e&&G.a.visible),children:[Object(m.jsx)("div",{className:G.a.tagsRow,children:Object(m.jsx)(V.a,{enter:{scale:.8,opacity:0,type:"from",duration:100,onComplete:function(t){t.target.style=""}},leave:{opacity:0,width:0,scale:0,duration:200},appear:!1,children:a.list.map((function(t){return Object(m.jsx)("div",{className:G.a.tag,children:Object(m.jsx)(z.a,{closable:!0,onClose:function(e){e.preventDefault(),function(t){var e=a.list.filter((function(e){return e!==t}));c(Object(j.a)(Object(j.a)({},a),{},{list:e}))}(t)},children:t})},t)}))})}),u&&Object(m.jsx)(F.a,{ref:i,size:"small",className:G.a.input,value:a.inputValue,onChange:function(t){c(Object(j.a)(Object(j.a)({},a),{},{inputValue:t.target.value}))},onBlur:b,onPressEnter:b,placeholder:r?"what was your weight?":"what did you eat?",bordered:!1}),!u&&Object(m.jsxs)(z.a,{onClick:function(){return d(!0)},className:G.a.plusTag,children:[Object(m.jsx)(P.a,{})," ",r?"new weight":"new meal"]})]})},q=a(253),Z=a(254),J=a(255),K=a(256),X={signIn:function(){var t=Object(R.a)(D.a.mark((function t(){var e;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(e=new d.auth.GoogleAuthProvider).addScope("profile"),t.next=5,d.auth().signInWithPopup(e).then((function(t){var e=t.user,a=e.uid,n=e.displayName,c=e.photoURL;l.doc(a).get().then((function(t){t.exists||l.doc(a).set({name:n,avatar:c,createdAt:d.firestore.FieldValue.serverTimestamp()})}))})).catch((function(t){console.error(t)}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),signOut:function(){var t=Object(R.a)(D.a.mark((function t(e){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.auth().signOut().then((function(){"function"===typeof e&&e()})).catch((function(t){console.error(t)}));case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0),"function"===typeof e&&e();case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},Q=a(168),$=a.n(Q),tt=function(t){var e=t.go,a=t.left,n=void 0!==a&&a,c=t.right,s=void 0!==c&&c,r=t.isLogin,i=void 0===r?null:r;return Object(m.jsxs)("div",{className:$.a.actionBarWrapper,children:[null!==i&&(i?Object(m.jsx)(q.a,{color:"#457b9d",style:{fontSize:24},onClick:X.signOut}):Object(m.jsx)(Z.a,{color:"#457b9d",style:{fontSize:24},onClick:X.signIn})),null===i&&(n?Object(m.jsx)(J.a,{color:"#457b9d",style:{fontSize:24},onClick:function(){return e("left")}}):Object(m.jsx)("div",{})),s?Object(m.jsx)(K.a,{color:"#457b9d",style:{fontSize:24},onClick:function(){return e("right")}}):Object(m.jsx)("div",{})]})},et=a(169),at=a.n(et),nt=a(257),ct=a(258),st={breakfast:{title:"Breakfast",color:"#5cdae3"},lunch:{title:"Lunch",color:"#c9b0ee"},dinner:{title:"Dinner",color:"#eae2b7"},weight:{title:"Weight",color:"#e0f4b9"}},rt=a(87),it=a.n(rt),ot=function(t){var e=t.type,a=t.data,c=t.id,s=t.fetchDietData,r=Object(n.useState)(!1),i=Object(w.a)(r,2),o=i[0],l=i[1],j=Object(n.useState)({list:a.data,inputValue:""}),b=Object(w.a)(j,2),p=b[0],h=b[1],f=function(){var t=Object(R.a)(D.a.mark((function t(){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==p.list.length&&!at.a.isEqual(a.data.sort(),p.list.sort())){t.next=3;break}return l(!1),t.abrupt("return");case 3:return t.next=5,u.doc(c).update((n={},Object(S.a)(n,"".concat(e,".createdAt"),d.firestore.FieldValue.serverTimestamp()),Object(S.a)(n,"".concat(e,".data"),p.list),n));case 5:s(),l(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:it.a.wrapper,children:[Object(m.jsxs)("div",{className:it.a.statusItem,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:E()(a.createdAt.toDate()).format("HH:mm")}),Object(m.jsx)("p",{style:{backgroundColor:st[e].color},children:st[e].title})]}),Object(m.jsx)("p",{children:"[ ".concat(a.data.map((function(t,n){return n!==a.data.length-1?"".concat(t,"weight"===e?" kg\u3001":"\u3001"):"weight"===e?"".concat(t," kg"):t})).join("")," ]")}),o?Object(m.jsx)(nt.a,{className:it.a.editIcon,onClick:f}):Object(m.jsx)(ct.a,{className:it.a.editIcon,onClick:function(){return l(!0)}})]}),Object(m.jsx)(H,{isWeight:"weight"===e,visible:o,tags:p,setTags:h})]})},lt=a(36),ut=a.n(lt),dt=function(t){var e=t.isLogin,a=t.go,c=Object(n.useState)({createdAt:null,breakfast:{createdAt:null,data:[]},lunch:{createdAt:null,data:[]},dinner:{createdAt:null,data:[]},weight:{createdAt:null,data:null},id:""}),s=Object(w.a)(c,2),r=s[0],i=s[1],o=Object(n.useState)(!1),l=Object(w.a)(o,2),b=l[0],p=l[1],h=Object(n.useState)(""),f=Object(w.a)(h,2),O=f[0],x=f[1],v=Object(n.useState)({list:[],inputValue:""}),_=Object(w.a)(v,2),g=_[0],y=_[1],k=function(){var t;u.where("user","==",null===(t=d.auth().currentUser)||void 0===t?void 0:t.uid).where("createdAt",">=",E()(E()().format("YYYY-MM-DD")).toDate()).where("createdAt","<",E()(E()().add(1,"day").format("YYYY-MM-DD")).toDate()).get().then((function(t){var e;t.empty?u.doc().set({createdAt:d.firestore.FieldValue.serverTimestamp(),user:null===(e=d.auth().currentUser)||void 0===e?void 0:e.uid,breakfast:{createdAt:null,data:[]},lunch:{createdAt:null,data:[]},dinner:{createdAt:null,data:[]},weight:{createdAt:null,data:[]}}):t.forEach((function(t){return i(Object(j.a)(Object(j.a)({},t.data()),{},{id:t.id}))}))}))},N=function(){var t=Object(R.a)(D.a.mark((function t(){var e;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.doc(r.id).update((e={},Object(S.a)(e,"".concat(O,".createdAt"),d.firestore.FieldValue.serverTimestamp()),Object(S.a)(e,"".concat(O,".data"),g.list),e));case 2:p(!1);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){e&&k()}),[e,b]),Object(n.useEffect)((function(){b||(y({list:[],inputValue:""}),x(""))}),[b]),Object(m.jsxs)("div",{className:ut.a.wrapper,children:[Object(m.jsx)(tt,{go:a,left:!0}),Object(m.jsx)("h1",{children:"Diet Management"}),Object(m.jsxs)("div",{className:ut.a.content,children:[e&&!r.breakfast.createdAt&&!r.lunch.createdAt&&!r.dinner.createdAt&&!r.weight.createdAt&&Object(m.jsx)("button",{type:"button",className:ut.a.statusText,onClick:function(){},children:"no data exists"}),e?Object(m.jsxs)(m.Fragment,{children:[r.breakfast.createdAt&&Object(m.jsx)(ot,{type:"breakfast",data:r.breakfast,id:r.id,fetchDietData:k}),r.lunch.createdAt&&Object(m.jsx)(ot,{type:"lunch",data:r.lunch,id:r.id,fetchDietData:k}),r.dinner.createdAt&&Object(m.jsx)(ot,{type:"dinner",data:r.dinner,id:r.id,fetchDietData:k}),r.weight.createdAt&&Object(m.jsx)(ot,{type:"weight",data:r.weight,id:r.id,fetchDietData:k}),!b&&Object(m.jsx)(I.a,{className:ut.a.addRecord,onClick:function(){return p(!0)},children:"add record"})]}):Object(m.jsx)("button",{type:"button",className:ut.a.statusText,onClick:X.signIn,children:"please login first"}),e&&Object(m.jsxs)("div",{className:Y()(ut.a.addWrapper,b&&ut.a.show),children:[Object(m.jsxs)("div",{className:ut.a.tagsWrapper,children:[Object(m.jsx)("h3",{children:"Add Record"}),Object(m.jsxs)(L.a.Group,{className:ut.a.typeSelect,value:O,onChange:function(t){return x(t.target.value)},buttonStyle:"solid",children:[Object(m.jsx)(L.a.Button,{value:"breakfast",children:"Breakfast"}),Object(m.jsx)(L.a.Button,{value:"lunch",children:"Lunch"}),Object(m.jsx)(L.a.Button,{value:"dinner",children:"Dinner"}),Object(m.jsx)(L.a.Button,{value:"weight",children:"Weight"})]}),Object(m.jsx)(H,{isWeight:"weight"===O,visible:b,tags:g,setTags:y})]}),Object(m.jsxs)("div",{className:ut.a.actionWrapper,children:[Object(m.jsx)(I.a,{disabled:!O||0===g.list.length,className:ut.a.submitRecord,onClick:N,children:"submit"}),Object(m.jsx)(I.a,{className:ut.a.close,onClick:function(){return p(!1)},children:Object(m.jsx)(M.a,{style:{color:"white"}})})]})]})]}),Object(m.jsx)("div",{className:Y()(ut.a.mask,Object(S.a)({},ut.a.showMask,b))})]})},jt=a(170),bt=a.n(jt),pt=function(t){var e=t.go;return Object(m.jsxs)("div",{className:bt.a.wrapper,children:[Object(m.jsx)(tt,{go:e,left:!0}),Object(m.jsx)("h1",{children:"Train Management"})]})},ht=a(259),ft=a(260),Ot=a(261),xt=a(19),mt=a.n(xt),vt=function(t){var e=t.isLogin,a=t.go,c=Object(n.useRef)(),s=Object(n.useState)({name:"User",avatar:"",createdAt:null}),r=Object(w.a)(s,2),i=r[0],o=r[1],b=Object(n.useState)([]),p=Object(w.a)(b,2),h=p[0],f=p[1],O=Object(n.useState)(!1),x=Object(w.a)(O,2),v=x[0],_=x[1];return Object(n.useEffect)((function(){e&&(function(){var t;l.doc(null===(t=d.auth().currentUser)||void 0===t?void 0:t.uid).get().then((function(t){t.exists&&o(t.data())}))}(),function(){var t;u.where("user","==",null===(t=d.auth().currentUser)||void 0===t?void 0:t.uid).where("createdAt",">=",E()(E()().subtract(3,"day").format("YYYY-MM-DD")).toDate()).where("createdAt","<",E()(E()().format("YYYY-MM-DD")).toDate()).get().then((function(t){var e=[];t.forEach((function(t){return e.push(Object(j.a)({},t.data()))})),f(e)}))}())}),[e]),Object(m.jsxs)("div",{className:mt.a.wrapper,children:[Object(m.jsx)(tt,{go:a,right:!0,isLogin:e}),Object(m.jsxs)("div",{className:mt.a.topContent,children:[Object(m.jsx)("h1",{children:"Your Fitness Pal"}),Object(m.jsxs)("div",{className:mt.a.topContentRow,children:[Object(m.jsxs)("div",{className:mt.a.topContentBox,children:[Object(m.jsx)(ht.a,{style:{position:"absolute",left:12,top:12,fontSize:16,color:"#0f0e0e"}}),i.avatar?Object(m.jsx)("div",{className:mt.a.avatar,style:{backgroundImage:"url(".concat(i.avatar,")")}}):Object(m.jsx)(ft.a,{style:{fontSize:50,color:"#5b5858"}}),Object(m.jsx)("p",{children:i.name})]}),Object(m.jsxs)("div",{className:mt.a.topContentBox,children:[Object(m.jsx)(Ot.a,{style:{position:"absolute",left:12,top:12,fontSize:16,color:"#0f0e0e"}}),Object(m.jsx)("div",{className:mt.a.dayCount,children:i.createdAt?E()().diff(E()(i.createdAt.toDate()).format("YYYY/MM/DD"),"day"):"No"}),Object(m.jsx)("p",{children:"day(s) passed"})]})]})]}),Object(m.jsxs)("div",{className:mt.a.bottomContent,children:[Object(m.jsx)("h1",{children:"Past 3 Days"}),Object(m.jsxs)("div",{className:mt.a.bottomContentRow,ref:c,onScroll:function(){c.current.scrollTop>0&&!v?_(!0):c.current.scrollTop<20&&v&&_(!1)},children:[Object(m.jsx)("div",{className:Y()(mt.a.sticky,v&&mt.a.isScroll)}),h.length>0?h.map((function(t){return Object(m.jsxs)("div",{className:mt.a.bottomContentBox,children:[Object(m.jsx)("h4",{className:mt.a.title,children:E()(t.createdAt.toDate()).format("YYYY/MM/DD ddd")}),Object(m.jsxs)("div",{className:mt.a.content,children:[Object(m.jsx)("div",{className:mt.a.bar,style:{backgroundColor:st.breakfast.color}}),Object(m.jsx)("p",{children:"[ ".concat(t.breakfast.data.map((function(e,a){return a!==t.breakfast.data.length-1?"".concat(e,"\u3001"):e})).join("")," ]")})]}),Object(m.jsxs)("div",{className:mt.a.content,children:[Object(m.jsx)("div",{className:mt.a.bar,style:{backgroundColor:st.lunch.color}}),Object(m.jsx)("p",{children:"[ ".concat(t.lunch.data.map((function(e,a){return a!==t.lunch.data.length-1?"".concat(e,"\u3001"):e})).join("")," ]")})]}),Object(m.jsxs)("div",{className:mt.a.content,children:[Object(m.jsx)("div",{className:mt.a.bar,style:{backgroundColor:st.dinner.color}}),Object(m.jsx)("p",{children:"[ ".concat(t.dinner.data.map((function(e,a){return a!==t.dinner.data.length-1?"".concat(e,"\u3001"):e})).join("")," ]")})]}),Object(m.jsxs)("div",{className:mt.a.content,children:[Object(m.jsx)("div",{className:mt.a.bar,style:{backgroundColor:st.weight.color}}),Object(m.jsx)("p",{children:"[ ".concat(t.weight.data.map((function(e,a){return a!==t.weight.data.length-1?"".concat(e," kg\u3001"):"".concat(e," kg")})).join("")," ]")})]})]},t.createdAt.toMillis())})):Object(m.jsx)("button",{type:"button",className:mt.a.statusText,onClick:function(){},children:"no data exists"})]})]})]})},_t=a(171),gt=a.n(_t),yt=function(){var t=!!d.auth().currentUser,e=Object(n.useRef)(0),a=Object(N.useSprings)(2,(function(t){return{x:t*window.innerWidth,scale:1,display:"block",borderRadius:0}})),c=Object(w.a)(a,2),s=c[0],r=c[1],i=Object(C.a)((function(t){var a=t.active,n=Object(w.a)(t.movement,1)[0],c=Object(w.a)(t.direction,1)[0],s=t.distance,i=t.cancel;a&&s>window.innerWidth/2&&i(e.current=Object(k.a)(e.current+(c>0?-1:1),0,1)),r((function(t){return t<e.current-1||t>e.current+1?{display:"none"}:{x:(t-e.current)*window.innerWidth+(a?n:0),scale:a?1-s/window.innerWidth/2:1,display:"block",borderRadius:a?"32px":0}}))}),{axis:"x"}),o=function(t){var a="right"===t?1:-1;r((function(t){return t<e.current+a-1||t>e.current+a+1?{display:"none"}:{x:(t-e.current-a)*window.innerWidth,scale:1,display:"block",borderRadius:0}})),e.current+=a};return s.map((function(e,a){var c=e.x,s=e.display,r=e.scale,l=e.borderRadius;return Object(n.createElement)(N.animated.div,Object(j.a)(Object(j.a)({},i()),{},{className:gt.a.wrapper,key:Math.random(),style:{display:s,x:c}}),Object(m.jsxs)(N.animated.div,{style:{scale:r,borderRadius:l},children:[0===a&&Object(m.jsx)(vt,{isLogin:t,go:o}),1===a&&Object(m.jsx)(dt,{isLogin:t,go:o}),2===a&&Object(m.jsx)(pt,{isLogin:t,go:o})]}))}))},wt=a(174),kt=a.n(wt),Nt=function(){return Object(m.jsx)("div",{className:kt.a.homeLayout,children:Object(m.jsx)(yt,{})})},Ct=function(t){var e=t.children;return Object(m.jsx)(b.a,{history:f,basename:"",children:e})},At=function(t){return Object(m.jsx)(Ct,{children:Object(m.jsx)(v,{children:Object(m.jsx)(p.c,{children:Object(m.jsx)(y,Object(j.a)({exact:!0,path:_,component:Nt},t))})})})},Dt=a(48),St=a(175),Rt=a(176),Tt=a.n(Rt),Yt=a(251),Wt=a(247),Et=(Object(Yt.a)("ROUTE_LOCATION_CHANGE",(function(t){return t})),{routing:Object(Wt.a)({ROUTE_LOCATION_CHANGE:function(t,e){return Object(j.a)(Object(j.a)({},t),e.payload)}},Object(j.a)({},f.location))}),It=(Object(Yt.a)("REPLACE_ROUTE",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){f.push(t),e()}})),Object(Yt.a)("REPLACE_ROUTE",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){f.replace(t),e()}})),{reducer:Et}),Lt=Object(Dt.c)(Object(j.a)({},It.reducer)),Mt=[Tt.a,St.a],Bt=Dt.d;var zt,Ft=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,262)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,s=e.getLCP,r=e.getTTFB;a(t),n(t),c(t),s(t),r(t)}))},Vt=(a(240),zt={},Object(Dt.e)(Lt,zt,Bt(Dt.a.apply(void 0,Mt))));d.auth().onAuthStateChanged((function(t){s.a.render(Object(m.jsx)(r.a,{store:Vt,children:Object(m.jsx)(At,{user:t})}),document.getElementById("root"))})),Ft()},36:function(t,e,a){t.exports={wrapper:"styles_wrapper__3DrSS",content:"styles_content__3zQlT",statusText:"styles_statusText__LYnYj",addRecord:"styles_addRecord__2xTm5",addWrapper:"styles_addWrapper__384Rz",tagsWrapper:"styles_tagsWrapper__3b8OE",typeSelect:"styles_typeSelect__35kNa",actionWrapper:"styles_actionWrapper__13AIf",submitRecord:"styles_submitRecord__16-K-",close:"styles_close__3j9uv",show:"styles_show__1Lo9y",mask:"styles_mask__13Oq5",showMask:"styles_showMask__SZF2l"}},69:function(t,e,a){t.exports={selectedContent:"styles_selectedContent__GEqzP",tagsRow:"styles_tagsRow__zzKYv",tag:"styles_tag__2E9rz",input:"styles_input__39P6V",plusTag:"styles_plusTag__13OWd",visible:"styles_visible__V6fuF"}},87:function(t,e,a){t.exports={wrapper:"styles_wrapper__3MW2h",statusItem:"styles_statusItem__1Nl3r",editIcon:"styles_editIcon__FVlzR"}}},[[241,1,2]]]);
//# sourceMappingURL=main.68e6afc1.chunk.js.map